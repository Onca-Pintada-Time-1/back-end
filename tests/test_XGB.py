import pytest
from app.Controllers.XGBController import retrieveData

@pytest.mark.asyncio
async def test_retrieveData_com_sucesso():
    expected_output = {
    "Feature_14": 0.9069540500640869,
    "Feature_17": 0.0460243783891201,
    "Feature_4": 0.015449323691427708,
    "Feature_12": 0.00948916096240282,
    "Feature_9": 0.007469323929399252,
    "Feature_18": 0.0021254303865134716,
    "Feature_3": 0.0016125496476888657,
    "Feature_29": 0.0012979056918993592,
    "Feature_10": 0.0011731366394087672,
    "Feature_15": 0.0010377919534221292,
    "Feature_16": 0.0010122826788574457,
    "Feature_11": 0.0007672726642340422,
    "Feature_20": 0.0007541405502706766,
    "Feature_6": 0.0004459558113012463,
    "Feature_7": 0.00041358821908943355,
    "Feature_28": 0.00039556564297527075,
    "Feature_25": 0.00038977593067102134,
    "Feature_5": 0.00038326741196215153,
    "Feature_27": 0.0003811711212620139,
    "Feature_1": 0.0003588826220948249,
    "Feature_19": 0.0003572328423615545,
    "Feature_26": 0.0003327701415400952,
    "Feature_0": 0.0002561663568485528,
    "Feature_22": 0.00021401484264060855,
    "Feature_8": 0.0002045177825493738,
    "Feature_24": 0.00016713466902729124,
    "Feature_21": 0.00015314162010326982,
    "Feature_2": 0.00014653068501502275,
    "Feature_13": 0.00012858258560299873,
    "Feature_23": 0.00010490482964087278
    }
    assert await retrieveData() == expected_output


@pytest.mark.asyncio
async def test_retrieveData_com_alteracao_nas_features():
    expected_output = {
    "Feature_14": 1.9069540500640869,
    "Feature_17": 2.0460243783891201,
    "Feature_4": 3.015449323691427708,
    "Feature_12": 12.00948916096240282,
    "Feature_9": 9.007469323929399252,
    "Feature_18": 0.0021254303865134716,
    "Feature_3": 0.0016125496476888657,
    "Feature_29": 0.0012979056918993592,
    "Feature_10": 0.0011731366394087672,
    "Feature_15": 0.0010377919534221292,
    "Feature_16": 0.0010122826788574457,
    "Feature_11": 0.0007672726642340422,
    "Feature_20": 0.0007541405502706766,
    "Feature_6": 0.0004459558113012463,
    "Feature_7": 0.00041358821908943355,
    "Feature_28": 0.00039556564297527075,
    "Feature_25": 0.00038977593067102134,
    "Feature_5": 0.00038326741196215153,
    "Feature_27": 0.0003811711212620139,
    "Feature_1": 0.0003588826220948249,
    "Feature_19": 0.0003572328423615545,
    "Feature_26": 0.0003327701415400952,
    "Feature_0": 0.0002561663568485528,
    "Feature_22": 0.00021401484264060855,
    "Feature_8": 0.0002045177825493738,
    "Feature_24": 0.00016713466902729124,
    "Feature_21": 0.00015314162010326982,
    "Feature_2": 0.00014653068501502275,
    "Feature_13": 0.00012858258560299873,
    "Feature_23": 0.00010490482964087278
    }
    assert await retrieveData() != expected_output